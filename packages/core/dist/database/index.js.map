{
  "version": 3,
  "sources": ["..\\src\\database\\schema\\tasks.schema.ts", "..\\src\\database\\schema\\helpers.ts", "..\\src\\database\\schema\\auth.schema.ts", "..\\src\\database\\index.ts"],
  "sourcesContent": [
    "import { boolean, integer, pgTable, text } from \"drizzle-orm/pg-core\";\r\n\r\nimport { timestamps } from \"./helpers\";\r\n\r\nexport const tasks = pgTable(\"tasks\", {\r\n  id: integer(\"id\").primaryKey().generatedAlwaysAsIdentity(),\r\n  name: text(\"name\").notNull(),\r\n  done: boolean(\"done\").notNull().default(false),\r\n  ...timestamps\r\n});\r\n",
    "import { sql } from \"drizzle-orm\";\r\nimport { text, timestamp } from \"drizzle-orm/pg-core\";\r\n\r\n// ---------- Database Helpers ----------\r\nexport const timestamps = {\r\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\r\n  updatedAt: timestamp(\"updated_at\")\r\n    .defaultNow()\r\n    .$onUpdate(() => sql`CURRENT_TIMESTAMP`)\r\n};\r\n",
    "import { relations } from \"drizzle-orm\";\nimport { pgTable, text, timestamp, boolean, index } from \"drizzle-orm/pg-core\";\n\nexport const users = pgTable(\"users\", {\n  id: text(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  emailVerified: boolean(\"email_verified\").default(false).notNull(),\n  image: text(\"image\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\")\n    .defaultNow()\n    .$onUpdate(() => /* @__PURE__ */ new Date())\n    .notNull(),\n  role: text(\"role\"),\n  banned: boolean(\"banned\").default(false),\n  banReason: text(\"ban_reason\"),\n  banExpires: timestamp(\"ban_expires\"),\n});\n\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    id: text(\"id\").primaryKey(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    token: text(\"token\").notNull().unique(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => /* @__PURE__ */ new Date())\n      .notNull(),\n    ipAddress: text(\"ip_address\"),\n    userAgent: text(\"user_agent\"),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => users.id, { onDelete: \"cascade\" }),\n    impersonatedBy: text(\"impersonated_by\"),\n  },\n  (table) => [index(\"sessions_userId_idx\").on(table.userId)],\n);\n\nexport const accounts = pgTable(\n  \"accounts\",\n  {\n    id: text(\"id\").primaryKey(),\n    accountId: text(\"account_id\").notNull(),\n    providerId: text(\"provider_id\").notNull(),\n    userId: text(\"user_id\")\n      .notNull()\n      .references(() => users.id, { onDelete: \"cascade\" }),\n    accessToken: text(\"access_token\"),\n    refreshToken: text(\"refresh_token\"),\n    idToken: text(\"id_token\"),\n    accessTokenExpiresAt: timestamp(\"access_token_expires_at\"),\n    refreshTokenExpiresAt: timestamp(\"refresh_token_expires_at\"),\n    scope: text(\"scope\"),\n    password: text(\"password\"),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .$onUpdate(() => /* @__PURE__ */ new Date())\n      .notNull(),\n  },\n  (table) => [index(\"accounts_userId_idx\").on(table.userId)],\n);\n\nexport const verifications = pgTable(\n  \"verifications\",\n  {\n    id: text(\"id\").primaryKey(),\n    identifier: text(\"identifier\").notNull(),\n    value: text(\"value\").notNull(),\n    expiresAt: timestamp(\"expires_at\").notNull(),\n    createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n    updatedAt: timestamp(\"updated_at\")\n      .defaultNow()\n      .$onUpdate(() => /* @__PURE__ */ new Date())\n      .notNull(),\n  },\n  (table) => [index(\"verifications_identifier_idx\").on(table.identifier)],\n);\n\nexport const userRelations = relations(users, ({ many }) => ({\n  sessions: many(sessions),\n  accounts: many(accounts),\n}));\n\nexport const sessionRelations = relations(sessions, ({ one }) => ({\n  users: one(users, {\n    fields: [sessions.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const accountRelations = relations(accounts, ({ one }) => ({\n  users: one(users, {\n    fields: [accounts.userId],\n    references: [users.id],\n  }),\n}));\n",
    "import { neon, type NeonQueryFunction } from \"@neondatabase/serverless\";\r\nimport { drizzle, NeonHttpDatabase } from \"drizzle-orm/neon-http\";\r\n\r\nimport * as schema from \"./schema\";\r\n\r\n// Initialize and export the database instance\r\nlet db: NeonHttpDatabase<typeof schema> & {\r\n  $client: NeonQueryFunction<false, false>;\r\n};\r\n\r\nexport type Database = typeof db;\r\n\r\n/**\r\n * Initialize the database connection\r\n * @param databaseUrl\r\n * @returns\r\n */\r\nexport function initDatabase(databaseUrl: string) {\r\n  if (db) {\r\n    return db;\r\n  }\r\n\r\n  // If no db instance, prepare and return\r\n  const sql = neon(databaseUrl);\r\n  db = drizzle(sql, { schema });\r\n\r\n  return db;\r\n}\r\n\r\n/**\r\n * Get the database instance\r\n * @returns\r\n */\r\nexport function getDatabase() {\r\n  if (!db) {\r\n    throw new Error(\"Database not initialized.\");\r\n  }\r\n\r\n  return db;\r\n}\r\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,4CAAoC;;;ACApC;AACA;AAGO,IAAM,aAAa;AAAA,EACxB,WAAW,UAAU,YAAY,EAAE,WAAW,EAAE,QAAQ;AAAA,EACxD,WAAW,UAAU,YAAY,EAC9B,WAAW,EACX,UAAU,MAAM,sBAAsB;AAC3C;;;ADLO,IAAM,QAAQ,QAAQ,SAAS;AAAA,EACpC,IAAI,QAAQ,IAAI,EAAE,WAAW,EAAE,0BAA0B;AAAA,EACzD,MAAM,MAAK,MAAM,EAAE,QAAQ;AAAA,EAC3B,MAAM,QAAQ,MAAM,EAAE,QAAQ,EAAE,QAAQ,KAAK;AAAA,KAC1C;AACL,CAAC;;;;;;;;;;;;AETD;AACA,oBAAS,kBAAS,oBAAM,uBAAW;AAE5B,IAAM,QAAQ,SAAQ,SAAS;AAAA,EACpC,IAAI,MAAK,IAAI,EAAE,WAAW;AAAA,EAC1B,MAAM,MAAK,MAAM,EAAE,QAAQ;AAAA,EAC3B,OAAO,MAAK,OAAO,EAAE,QAAQ,EAAE,OAAO;AAAA,EACtC,eAAe,SAAQ,gBAAgB,EAAE,QAAQ,KAAK,EAAE,QAAQ;AAAA,EAChE,OAAO,MAAK,OAAO;AAAA,EACnB,WAAW,WAAU,YAAY,EAAE,WAAW,EAAE,QAAQ;AAAA,EACxD,WAAW,WAAU,YAAY,EAC9B,WAAW,EACX,UAAU,sBAAsB,IAAI,IAAM,EAC1C,QAAQ;AAAA,EACX,MAAM,MAAK,MAAM;AAAA,EACjB,QAAQ,SAAQ,QAAQ,EAAE,QAAQ,KAAK;AAAA,EACvC,WAAW,MAAK,YAAY;AAAA,EAC5B,YAAY,WAAU,aAAa;AACrC,CAAC;AAEM,IAAM,WAAW,SACtB,YACA;AAAA,EACE,IAAI,MAAK,IAAI,EAAE,WAAW;AAAA,EAC1B,WAAW,WAAU,YAAY,EAAE,QAAQ;AAAA,EAC3C,OAAO,MAAK,OAAO,EAAE,QAAQ,EAAE,OAAO;AAAA,EACtC,WAAW,WAAU,YAAY,EAAE,WAAW,EAAE,QAAQ;AAAA,EACxD,WAAW,WAAU,YAAY,EAC9B,UAAU,sBAAsB,IAAI,IAAM,EAC1C,QAAQ;AAAA,EACX,WAAW,MAAK,YAAY;AAAA,EAC5B,WAAW,MAAK,YAAY;AAAA,EAC5B,QAAQ,MAAK,SAAS,EACnB,QAAQ,EACR,WAAW,MAAM,MAAM,IAAI,EAAE,UAAU,UAAU,CAAC;AAAA,EACrD,gBAAgB,MAAK,iBAAiB;AACxC,GACA,CAAC,UAAU,CAAC,MAAM,qBAAqB,EAAE,GAAG,MAAM,MAAM,CAAC,CAC3D;AAEO,IAAM,WAAW,SACtB,YACA;AAAA,EACE,IAAI,MAAK,IAAI,EAAE,WAAW;AAAA,EAC1B,WAAW,MAAK,YAAY,EAAE,QAAQ;AAAA,EACtC,YAAY,MAAK,aAAa,EAAE,QAAQ;AAAA,EACxC,QAAQ,MAAK,SAAS,EACnB,QAAQ,EACR,WAAW,MAAM,MAAM,IAAI,EAAE,UAAU,UAAU,CAAC;AAAA,EACrD,aAAa,MAAK,cAAc;AAAA,EAChC,cAAc,MAAK,eAAe;AAAA,EAClC,SAAS,MAAK,UAAU;AAAA,EACxB,sBAAsB,WAAU,yBAAyB;AAAA,EACzD,uBAAuB,WAAU,0BAA0B;AAAA,EAC3D,OAAO,MAAK,OAAO;AAAA,EACnB,UAAU,MAAK,UAAU;AAAA,EACzB,WAAW,WAAU,YAAY,EAAE,WAAW,EAAE,QAAQ;AAAA,EACxD,WAAW,WAAU,YAAY,EAC9B,UAAU,sBAAsB,IAAI,IAAM,EAC1C,QAAQ;AACb,GACA,CAAC,UAAU,CAAC,MAAM,qBAAqB,EAAE,GAAG,MAAM,MAAM,CAAC,CAC3D;AAEO,IAAM,gBAAgB,SAC3B,iBACA;AAAA,EACE,IAAI,MAAK,IAAI,EAAE,WAAW;AAAA,EAC1B,YAAY,MAAK,YAAY,EAAE,QAAQ;AAAA,EACvC,OAAO,MAAK,OAAO,EAAE,QAAQ;AAAA,EAC7B,WAAW,WAAU,YAAY,EAAE,QAAQ;AAAA,EAC3C,WAAW,WAAU,YAAY,EAAE,WAAW,EAAE,QAAQ;AAAA,EACxD,WAAW,WAAU,YAAY,EAC9B,WAAW,EACX,UAAU,sBAAsB,IAAI,IAAM,EAC1C,QAAQ;AACb,GACA,CAAC,UAAU,CAAC,MAAM,8BAA8B,EAAE,GAAG,MAAM,UAAU,CAAC,CACxE;AAEO,IAAM,gBAAgB,UAAU,OAAO,GAAG,YAAY;AAAA,EAC3D,UAAU,KAAK,QAAQ;AAAA,EACvB,UAAU,KAAK,QAAQ;AACzB,EAAE;AAEK,IAAM,mBAAmB,UAAU,UAAU,GAAG,WAAW;AAAA,EAChE,OAAO,IAAI,OAAO;AAAA,IAChB,QAAQ,CAAC,SAAS,MAAM;AAAA,IACxB,YAAY,CAAC,MAAM,EAAE;AAAA,EACvB,CAAC;AACH,EAAE;AAEK,IAAM,mBAAmB,UAAU,UAAU,GAAG,WAAW;AAAA,EAChE,OAAO,IAAI,OAAO;AAAA,IAChB,QAAQ,CAAC,SAAS,MAAM;AAAA,IACxB,YAAY,CAAC,MAAM,EAAE;AAAA,EACvB,CAAC;AACH,EAAE;;ACjGF;AACA;AAKA,IAAI;AAWG,SAAS,YAAY,CAAC,aAAqB;AAAA,EAChD,IAAI,IAAI;AAAA,IACN,OAAO;AAAA,EACT;AAAA,EAGA,MAAM,OAAM,KAAK,WAAW;AAAA,EAC5B,KAAK,QAAQ,MAAK,EAAE,uBAAO,CAAC;AAAA,EAE5B,OAAO;AAAA;AAOF,SAAS,WAAW,GAAG;AAAA,EAC5B,IAAI,CAAC,IAAI;AAAA,IACP,MAAM,IAAI,MAAM,2BAA2B;AAAA,EAC7C;AAAA,EAEA,OAAO;AAAA;",
  "debugId": "10DBBE6FBCEEB8F564756E2164756E21",
  "names": []
}